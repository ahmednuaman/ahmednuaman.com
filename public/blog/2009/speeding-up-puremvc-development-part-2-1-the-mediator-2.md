title: Speeding Up PureMVC Development, Part 2.1: The Mediator (2)
link: http://www.ahmednuaman.com/blog/speeding-up-puremvc-development-part-2-1-the-mediator-2/
creator: ahmed
description: 
post_id: 253
post_date: 2009-07-09 09:51:13
post_date_gmt: 2009-07-09 09:51:13
comment_status: open
post_name: speeding-up-puremvc-development-part-2-1-the-mediator-2
status: publish
post_type: post

# Speeding Up PureMVC Development, Part 2.1: The Mediator (2)

I recently [wrote a post about speeding up development with PureMVC's mediator](/blog/2009/07/02/speeding-up-puremvc-development-part-2-the-mediator/). Now I've created a super mediator class that will defiantly help you speed up your code. I mentioned before that I really didn't like the idea of having to use "[listNotificationInterests()](http://puremvc.org/pages/docs/AS3/standard/framework_asdoc/org/puremvc/as3/patterns/mediator/Mediator.html#listNotificationInterests())" and then "[handleNotification()](http://puremvc.org/pages/docs/AS3/standard/framework_asdoc/org/puremvc/as3/patterns/mediator/Mediator.html#handleNotification())" as these functions lead to unnecessary duplication of code and, if you're like me, most of the time you use the "switch()" within "handleNotification()" to execute functions rather than writing a load code. So what have I come up with you ask? Well, here's my new mediator class (which you will extend instead of extending PureMVC's regular mediator): ` /** * @author Ahmed Nuaman (http://www.ahmednuaman.com) * @langversion 3 * * This work is licenced under the Creative Commons Attribution-Share Alike 2.0 UK: England & Wales License. * To view a copy of this licence, visit http://creativecommons.org/licenses/by-sa/2.0/uk/ or send a letter * to Creative Commons, 171 Second Street, Suite 300, San Francisco, California 94105, USA. */ package com.firestartermedia.lib.puremvc.patterns { import com.adobe.utils.ArrayUtil; import com.firestartermedia.lib.puremvc.events.SpriteEvent; import com.oneclicktofame.ApplicationFacade; import flash.utils.Dictionary; import org.puremvc.as3.interfaces.INotification; import org.puremvc.as3.patterns.mediator.Mediator; public class Mediator extends org.puremvc.as3.patterns.mediator.Mediator { protected var notificationInterests:Array = [ ]; protected var notificationHandlers:Dictionary = new Dictionary(); public function Mediator(name:String=null, viewComponent:Object=null) { super( name, viewComponent ); trackEvent( 'Registered ' + name ); } public function trackEvent(event:String):void { sendNotification( ApplicationFacade.TRACK, event ); } public function sendEvent(event:SpriteEvent):void { sendNotification( event.type, event.data ); } public function declareNotificationInterest(notificationName:String, func:Function):void { notificationInterests.push( notificationName ); notificationInterests = ArrayUtil.createUniqueCopy( notificationInterests ); notificationHandlers[ notificationName ] = func; } override public function listNotificationInterests():Array { return notificationInterests; } override public function handleNotification(notification:INotification):void { notificationHandlers[ notification.getName() ].apply( null, [ notification ] ); } } } ` The idea behind it is that you would now use "declareNotificationInterest()" where you would pass in the notification name and then the function to execute, like so: ` package com.oneclicktofame.view { import com.firestartermedia.lib.puremvc.patterns.Mediator; import com.oneclicktofame.ApplicationFacade; import com.oneclicktofame.model.ConfigProxy; import com.oneclicktofame.model.VideoProxy; import com.oneclicktofame.view.component.PlayerView; import org.puremvc.as3.interfaces.INotification; public class PlayerViewMediator extends Mediator { public static const NAME:String = 'PlayerViewMediator'; private var playerView:PlayerView; public function PlayerViewMediator(viewComponent:Object=null) { super( NAME, viewComponent ); declareNotificationInterest( ApplicationFacade.RESIZE, handleResize ); declareNotificationInterest( PlayerView.PLAY, handlePlayerViewPlay ); declareNotificationInterest( PlayerView.PAUSE, handlePlayerViewPause ); declareNotificationInterest( PlayerView.RESUME, handlePlayerViewResume ); declareNotificationInterest( VideoProxy.VIDEO_DATA_READY, handleVideoProxyVideoDataReady ); } ... ` It's a bit of a shame that I have to place the functions within the constructor but it's just how PureMVC works. I may try to suggest to the guys are PureMVC to see if there's a possibility to delay the binding of notifications to the mediator within the "[onRegister()](http://puremvc.org/pages/docs/AS3/standard/framework_asdoc/org/puremvc/as3/patterns/mediator/Mediator.html#onRegister())" function. However, this still works a charm and means that I don't have to write half was much code! If you want the source code, you can get out my repo from git: [http://github.com/ahmednuaman/AS3/tree/master](http://github.com/ahmednuaman/AS3/tree/master)